---
title: "[2026 동계 모각코] 2026-01-19 결과 (6회차)"
image: "/images/mogakco_13.png"
date: "2026-01-19"
category: "mogakco"
tags: ["모각코"]
summary: ""
draft: false
---

## 목표
- 목표: browser_triage.html 리포트 완성 + 도구 패키징
- 진행 내용
    - HTML 리포트 생성 기능 구현
    - 패키징

## 진행 내용

### HTML 리포트 모듈 구현

기존 CLI 출력 방식 외에 인터랙티브한 HTML 리포트를 생성하는 `html_reporter.py` 모듈을 개발했다.

#### 주요 기능

| 기능 | 설명 |
|------|------|
| 위험도 대시보드 | Critical/High/Medium/Low/Safe 통계를 시각적으로 표시 |
| 필터링 | 위험도별 필터, 파일명/URL 검색 기능 |
| 상세 정보 | 각 레코드 클릭 시 전체 정보 펼치기/접기 |
| 분석 가이드 | 해석 포인트를 리포트 하단에 포함 |

#### 구현 코드

```python
# html_reporter.py 핵심 구조
def generate_html_report(downloads, output_path="browser_triage.html"):
    """HTML 트리아지 리포트 생성"""

    # 위험도 통계 계산
    risk_counts = {"critical": 0, "high": 0, "medium": 0, "low": 0, "safe": 0}
    records_data = []

    for record in downloads:
        # 각 레코드 파싱 및 위험도 평가
        risk_tag, risk_reasons = evaluate_risk(filename, ext, url)
        risk_counts[risk_tag] += 1
        # ...

    # HTML 템플릿 생성 (CSS + JavaScript 포함)
    html = f"""<!DOCTYPE html>
    <html lang="ko">
    <!-- 대시보드, 필터, 레코드 목록, 분석 가이드 -->
    </html>
    """

    with open(output_path, 'w', encoding='utf-8') as f:
        f.write(html)
```

#### CLI 옵션 추가

`main.py`에 argparse를 적용하여 다양한 출력 옵션을 지원하도록 개선했다.

```bash
# 기본 사용 (콘솔 + HTML 동시 출력)
python main.py History

# HTML 리포트만 생성
python main.py History --html-only

# 특정 파일명으로 HTML 출력
python main.py History -o case_001_report.html

# 콘솔 출력만 (HTML 없음)
python main.py History --no-html
```

### 패키징

```
download-triage/
├── main.py           # CLI 엔트리포인트 (argparse 적용)
├── db_parser.py      # History DB 파싱 및 WebKit 시간 변환
├── risk_analyzer.py  # 위험도 평가 엔진
├── formatter.py      # 출력 포맷팅 및 검증
├── html_reporter.py  # HTML 리포트 생성 (신규)
└── README.md         # 프로젝트 문서 (신규)
```

### 도구 실행 테스트

KDFS 2023 시나리오 데이터로 HTML 리포트 생성을 테스트했다.

```bash
cd C:\Users\sjna\문서\Project\download-triage
python main.py C:\Users\sjna\Desktop\History -o kdfs_report.html
```

![HTML 리포트 대시보드](/images/mogakco_13.png)

![레코드 상세 정보](/images/mogakco_14.png)

![분석 가이드](/images/mogakco_15.png)

생성된 `browser_triage.html` 리포트 특징:
- Critical 레코드 7개가 상단에 자동 펼침으로 표시
- 위험도별 색상 구분 (Critical: 빨강, High: 주황, Medium: 노랑, Safe: 초록)
- JavaScript 기반 필터링으로 특정 위험도만 필터링 가능
- 분석 가이드 섹션에서 경로별 위험도, State 해석 등 참조 가능

## 회고

- 6주간의 모각코를 통해 Chrome History DB 분석 도구를 완성했다.
- 실제 포렌식 케이스(KDFS 2023)를 분석하며 도구의 유효성을 검증했고, 다운로드 기록 분석이 초기 트리아지 단계에서 분석 방향 설정에 효과적임을 확인했다.
- 향후 개선 방향:
    - `downloads_url_chains` 테이블을 활용한 리다이렉션 체인 분석
    - 타임라인 시각화 (chart.js 등 활용)
